<!DOCTYPE html>
<html>
  <head>
    <title>PSI â€¢ jczimm</title>
    <script src="http://code.jquery.com/jquery-1.11.0.js"></script>
    <link rel="stylesheet" href="pstyle.css">
    <script src="https://cdn.rawgit.com/jonobr1/two.js/master/build/two.js"></script>
  </head>
  <body onload="init();">
    <script>
      Array.prototype.remove = function(from, to) {
        var rest = this.slice((to || from) + 1 || this.length);
        this.length = from < 0 ? this.length + from : from;
        return this.push.apply(this, rest);
      };
      var two, rect;
      var keydown;
      var $props = {
        trashcan: $("<img src=\"http://fc02.deviantart.net/fs71/f/2014/088/2/5/trash_by_oceanscented-d7c6gzz.png\" class=\"prop can\" />")
      }, current = [], ticks = 0;
      function init(){
        two = new Two({
          fullscreen: true,
          autostart: true
        }).appendTo(document.getElementById("game-wrapper"));
        two.bind('update', function() {
          if(Math.random()<0.005) $("body").append($props.trashcan.attr("id",+new Date()));
          //TODO: find a way to select specific obstacles (if classes, how would they be drawn?)
          $(".prop").css("bottom", two.height*0.2+30);
          ticks++;
        });
        addKeyListeners();
      }
      
      function Prop(type){
        this.type = type;
        this.pos = 0;
        this.UUID = +new Date();
      }
      
      function addKeyListeners(){
        $(document).keydown(function(e){
          if(e.keyCode==32) keydown = true;
        });
        $(document).keyup(function(e){
          if(e.keyCode==32) keydown = false;
        });
      }
      $(document).resize(function(){
        //two.width = $(window).width();
        two.height = $(window).height();
        $(".prop").css("bottom",two.height*0.2+30);
      });
    </script>
    <div id="game-wrapper">
      <img src="http://files.gamebanana.com/img/ico/sprays/sasuke_2.gif" id="player" />
      
    </div>
  </body>
</html>
