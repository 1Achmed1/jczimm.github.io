(function(){var e=this;var t=e._;var n={};var r=Array.prototype,i=Object.prototype,s=Function.prototype;var o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty;var c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind;var x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=x}exports._=x}else{e._=x}x.VERSION="1.5.1";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c){e.forEach(t,r)}else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++){if(t.call(r,e[i],i,e)===n)return}}else{for(var o in e){if(x.has(e,o)){if(t.call(r,e[o],o,e)===n)return}}}};x.map=x.collect=function(e,t,n){var r=[];if(e==null)return r;if(h&&e.map===h)return e.map(t,n);T(e,function(e,i,s){r.push(t.call(n,e,i,s))});return r};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(e==null)e=[];if(p&&e.reduce===p){if(r)t=x.bind(t,r);return i?e.reduce(t,n):e.reduce(t)}T(e,function(e,s,o){if(!i){n=e;i=true}else{n=t.call(r,n,e,s,o)}});if(!i)throw new TypeError(N);return n};x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(e==null)e=[];if(d&&e.reduceRight===d){if(r)t=x.bind(t,r);return i?e.reduceRight(t,n):e.reduceRight(t)}var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s;if(!i){n=e[a];i=true}else{n=t.call(r,n,e[a],a,f)}});if(!i)throw new TypeError(N);return n};x.find=x.detect=function(e,t,n){var r;C(e,function(e,i,s){if(t.call(n,e,i,s)){r=e;return true}});return r};x.filter=x.select=function(e,t,n){var r=[];if(e==null)return r;if(v&&e.filter===v)return e.filter(t,n);T(e,function(e,i,s){if(t.call(n,e,i,s))r.push(e)});return r};x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)};x.every=x.all=function(e,t,r){t||(t=x.identity);var i=true;if(e==null)return i;if(m&&e.every===m)return e.every(t,r);T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n});return!!i};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=false;if(e==null)return i;if(g&&e.some===g)return e.some(t,r);T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n});return!!i};x.contains=x.include=function(e,t){if(e==null)return false;if(y&&e.indexOf===y)return e.indexOf(t)!=-1;return C(e,function(e){return e===t})};x.invoke=function(e,t){var n=u.call(arguments,2);var r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})};x.pluck=function(e,t){return x.map(e,function(e){return e[t]})};x.where=function(e,t,n){if(x.isEmpty(t))return n?void 0:[];return x[n?"find":"filter"](e,function(e){for(var n in t){if(t[n]!==e[n])return false}return true})};x.findWhere=function(e,t){return x.where(e,t,true)};x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535){return Math.max.apply(Math,e)}if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})});return r.value};x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535){return Math.min.apply(Math,e)}if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})});return r.value};x.shuffle=function(e){var t;var n=0;var r=[];T(e,function(e){t=x.random(n++);r[n-1]=r[t];r[t]=e});return r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria;var r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={};var s=k(t==null?x.identity:t);T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)});return i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})};x.countBy=function(e,t,n){return L(e,t,n,function(e,t){if(!x.has(e,t))e[t]=0;e[t]++})};x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t);var s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s};x.toArray=function(e){if(!e)return[];if(x.isArray(e))return u.call(e);if(e.length===+e.length)return x.map(e,x.identity);return x.values(e)};x.size=function(e){if(e==null)return 0;return e.length===+e.length?e.length:x.keys(e).length};x.first=x.head=x.take=function(e,t,n){if(e==null)return void 0;return t!=null&&!n?u.call(e,0,t):e[0]};x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))};x.last=function(e,t,n){if(e==null)return void 0;if(t!=null&&!n){return u.call(e,Math.max(e.length-t,0))}else{return e[e.length-1]}};x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)};x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){if(t&&x.every(e,x.isArray)){return a.apply(n,e)}T(e,function(e){if(x.isArray(e)||x.isArguments(e)){t?o.apply(n,e):A(e,t,n)}else{n.push(e)}});return n};x.flatten=function(e,t){return A(e,t,[])};x.without=function(e){return x.difference(e,u.call(arguments,1))};x.uniq=x.unique=function(e,t,n,r){if(x.isFunction(t)){r=n;n=t;t=false}var i=n?x.map(e,n,r):e;var s=[];var o=[];T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n)){o.push(n);s.push(e[r])}});return s};x.union=function(){return x.uniq(x.flatten(arguments,true))};x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})};x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})};x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0));var t=new Array(e);for(var n=0;n<e;n++){t[n]=x.pluck(arguments,""+n)}return t};x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++){if(t){n[e[r]]=t[r]}else{n[e[r][0]]=e[r][1]}}return n};x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n=="number"){r=n<0?Math.max(0,i+n):n}else{r=x.sortedIndex(e,t);return e[r]===t?r:-1}}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1};x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b){return r?e.lastIndexOf(t,n):e.lastIndexOf(t)}var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1};x.range=function(e,t,n){if(arguments.length<=1){t=e||0;e=0}n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0);var i=0;var s=new Array(r);while(i<r){s[i++]=e;e+=n}return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;n=u.call(arguments,2);return r=function(){if(!(this instanceof r))return e.apply(t,n.concat(u.call(arguments)));O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));if(Object(s)===s)return s;return i}};x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}};x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");T(t,function(t){e[t]=x.bind(e[t],e)});return e};x.memoize=function(e,t){var n={};t||(t=x.identity);return function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}};x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)};x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))};x.throttle=function(e,t,n){var r,i,s;var o=null;var u=0;n||(n={});var a=function(){u=n.leading===false?0:new Date;o=null;s=e.apply(r,i)};return function(){var f=new Date;if(!u&&n.leading===false)u=f;var l=t-(f-u);r=this;i=arguments;if(l<=0){clearTimeout(o);o=null;u=f;s=e.apply(r,i)}else if(!o&&n.trailing!==false){o=setTimeout(a,l)}return s}};x.debounce=function(e,t,n){var r;var i=null;return function(){var s=this,o=arguments;var u=function(){i=null;if(!n)r=e.apply(s,o)};var a=n&&!i;clearTimeout(i);i=setTimeout(u,t);if(a)r=e.apply(s,o);return r}};x.once=function(e){var t=false,n;return function(){if(t)return n;t=true;n=e.apply(this,arguments);e=null;return n}};x.wrap=function(e,t){return function(){var n=[e];o.apply(n,arguments);return t.apply(this,n)}};x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--){t=[e[n].apply(this,t)]}return t[0]}};x.after=function(e,t){return function(){if(--e<1){return t.apply(this,arguments)}}};x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)if(x.has(e,n))t.push(n);return t};x.values=function(e){var t=[];for(var n in e)if(x.has(e,n))t.push(e[n]);return t};x.pairs=function(e){var t=[];for(var n in e)if(x.has(e,n))t.push([n,e[n]]);return t};x.invert=function(e){var t={};for(var n in e)if(x.has(e,n))t[e[n]]=n;return t};x.functions=x.methods=function(e){var t=[];for(var n in e){if(x.isFunction(e[n]))t.push(n)}return t.sort()};x.extend=function(e){T(u.call(arguments,1),function(t){if(t){for(var n in t){e[n]=t[n]}}});return e};x.pick=function(e){var t={};var n=a.apply(r,u.call(arguments,1));T(n,function(n){if(n in e)t[n]=e[n]});return t};x.omit=function(e){var t={};var n=a.apply(r,u.call(arguments,1));for(var i in e){if(!x.contains(n,i))t[i]=e[i]}return t};x.defaults=function(e){T(u.call(arguments,1),function(t){if(t){for(var n in t){if(e[n]===void 0)e[n]=t[n]}}});return e};x.clone=function(e){if(!x.isObject(e))return e;return x.isArray(e)?e.slice():x.extend({},e)};x.tap=function(e,t){t(e);return e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;if(e instanceof x)e=e._wrapped;if(t instanceof x)t=t._wrapped;var i=f.call(e);if(i!=f.call(t))return false;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return false;var s=n.length;while(s--){if(n[s]==e)return r[s]==t}var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)){return false}n.push(e);r.push(t);var a=0,l=true;if(i=="[object Array]"){a=e.length;l=a==t.length;if(l){while(a--){if(!(l=M(e[a],t[a],n,r)))break}}}else{for(var c in e){if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}}if(l){for(c in t){if(x.has(t,c)&&!(a--))break}l=!a}}n.pop();r.pop();return l};x.isEqual=function(e,t){return M(e,t,[],[])};x.isEmpty=function(e){if(e==null)return true;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return false;return true};x.isElement=function(e){return!!(e&&e.nodeType===1)};x.isArray=w||function(e){return f.call(e)=="[object Array]"};x.isObject=function(e){return e===Object(e)};T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}});if(!x.isArguments(arguments)){x.isArguments=function(e){return!!(e&&x.has(e,"callee"))}}if(typeof /./!=="function"){x.isFunction=function(e){return typeof e==="function"}}x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};x.isNaN=function(e){return x.isNumber(e)&&e!=+e};x.isBoolean=function(e){return e===true||e===false||f.call(e)=="[object Boolean]"};x.isNull=function(e){return e===null};x.isUndefined=function(e){return e===void 0};x.has=function(e,t){return l.call(e,t)};x.noConflict=function(){e._=t;return this};x.identity=function(e){return e};x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r};x.random=function(e,t){if(t==null){t=e;e=0}return e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){if(t==null)return"";return(""+t).replace(D[e],function(t){return _[e][t]})}});x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n};x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];o.apply(e,arguments);return F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t};x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/;var B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g");var s=0;var o="__p+='";e.replace(i,function(t,n,r,i,u){o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]});if(n){o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}if(r){o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"}if(i){o+="';\n"+i+"\n__p+='"}s=u+t.length;return t});o+="';\n";if(!n.variable)o="with(obj||{}){\n"+o+"}\n";o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){u.source=o;throw u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};a.source="function("+(n.variable||"obj")+"){\n"+o+"}";return a};x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x);T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);if((e=="shift"||e=="splice")&&n.length===0)delete n[0];return F.call(this,n)}});T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}});x.extend(x.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);var Backbone=Backbone||{};(function(){var e=[];var t=e.slice;var n=/\s+/;var r=function(e,t,n){var r,i=-1,s=t.length;switch(n.length){case 0:while(++i<s)(r=t[i]).callback.call(r.ctx);return;case 1:while(++i<s)(r=t[i]).callback.call(r.ctx,n[0]);return;case 2:while(++i<s)(r=t[i]).callback.call(r.ctx,n[0],n[1]);return;case 3:while(++i<s)(r=t[i]).callback.call(r.ctx,n[0],n[1],n[2]);return;default:while(++i<s)(r=t[i]).callback.apply(r.ctx,n)}};var i=Backbone.Events={on:function(e,t,n){this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);r.push({callback:t,context:n,ctx:n||this});return this},once:function(e,t,n){var r=this;var i=_.once(function(){r.off(e,i);t.apply(this,arguments)});i._callback=t;this.on(e,i,n);return this},off:function(e,t,n){var r,i,s,o,u,a,f,l;if(!this._events)return this;if(!e&&!t&&!n){this._events={};return this}o=e?[e]:_.keys(this._events);for(u=0,a=o.length;u<a;u++){e=o[u];if(r=this._events[e]){s=[];if(t||n){for(f=0,l=r.length;f<l;f++){i=r[f];if(t&&t!==(i.callback._callback||i.callback)||n&&n!==i.context){s.push(i)}}}this._events[e]=s}}return this},trigger:function(e){if(!this._events)return this;var n=t.call(arguments,1);var i=this._events[e];var s=this._events.all;if(i)r(this,i,n);if(s)r(this,s,arguments);return this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={});var i=e._listenerId||(e._listenerId=_.uniqueId("l"));r[i]=e;e.on(t,n||this,this);return this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return;if(e){e.off(t,n,this);if(!t&&!n)delete r[e._listenerId]}else{for(var i in r){r[i].off(null,null,this)}this._listeners={}}return this}};i.bind=i.on;i.unbind=i.off;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=i}exports.Backbone=exports.Backbone||Backbone}})();(function(){function i(n,r){var i=(new Date).getTime();var s=Math.max(0,16-(i-t));var o=e.setTimeout(function(){n(i+s)},s);t=i+s;return o}var e=this;var t=0;var n=["ms","moz","webkit","o"];if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=i}exports.requestAnimationFrame=i;return}for(var r=0;r<n.length&&!e.requestAnimationFrame;++r){e.requestAnimationFrame=e[n[r]+"RequestAnimationFrame"];e.cancelAnimationFrame=e[n[r]+"CancelAnimationFrame"]||e[n[r]+"CancelRequestAnimationFrame"]}if(!e.requestAnimationFrame)e.requestAnimationFrame=i;if(!e.cancelAnimationFrame)e.cancelAnimationFrame=function(e){clearTimeout(e)}})();(function(){function k(){var e=document.body.getBoundingClientRect();var t=this.width=e.width;var n=this.height=e.height;this.renderer.setSize(t,n,this.ratio);this.trigger(m.Events.resize,t,n)}function L(){return(e.performance&&e.performance.now?e.performance:Date).now()}var e=this;var t=e.Two||{};var n=Math.sin,r=Math.cos,i=Math.atan2,s=Math.sqrt,o=Math.round,u=Math.abs,a=Math.PI,f=a*2,l=a/2,c=Math.pow,h=Math.min,p=Math.max;var d=0;var v={hasEventListeners:_.isFunction(e.addEventListener),bind:function(e,t,n,r){if(this.hasEventListeners){e.addEventListener(t,n,!!r)}else{e.attachEvent("on"+t,n)}return this},unbind:function(e,t,n,r){if(this.hasEventListeners){e.removeEventListeners(t,n,!!r)}else{e.detachEvent("on"+t,n)}return this}};var m=e.Two=function(t){var n=_.defaults(t||{},{fullscreen:false,width:640,height:480,type:m.Types.svg,autostart:false});_.each(n,function(e,t){if(t==="fullscreen"||t==="width"||t==="height"||t==="autostart"){return}this[t]=e},this);if(_.isElement(n.domElement)){this.type=m.Types[n.domElement.tagName.toLowerCase()]}this.renderer=new m[this.type](this);m.Utils.setPlaying.call(this,n.autostart);this.frameCount=0;if(n.fullscreen){var r=_.bind(k,this);_.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"});_.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"});v.bind(e,"resize",r);r()}else if(!_.isElement(n.domElement)){this.renderer.setSize(n.width,n.height,this.ratio);this.width=n.width;this.height=n.height}this.scene=this.renderer.scene;m.Instances.push(this)};_.extend(m,{Array:e.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.4.0",Identifier:"two-",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){e.Two=t;return this},uniqueId:function(){var e=d;d++;return e},Utils:{release:function(e){if(!_.isObject(e)){return}if(_.isFunction(e.unbind)){e.unbind()}if(e.vertices){if(_.isFunction(e.vertices.unbind)){e.vertices.unbind()}_.each(e.vertices,function(e){if(_.isFunction(e.unbind)){e.unbind()}})}if(e.children){_.each(e.children,function(e){m.Utils.release(e)})}},Curve:{CollinearityEpsilon:c(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:.01}},devicePixelRatio:e.devicePixelRatio||1,getBackingStoreRatio:function(e){return e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1},getRatio:function(e){return m.Utils.devicePixelRatio/N(e)},setPlaying:function(e){this.playing=!!e;return this},getComputedMatrix:function(e,t){var n=[];var t=t&&t.identity()||new m.Matrix;var r=e;while(r&&r._matrix){n.push(r._matrix);r=r.parent}n.reverse();_.each(n,function(e){var n=e.elements;t.multiply(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9])});return t},applySvgAttributes:function(e,t){_.each(e.attributes,function(e,n){var r=e.nodeName;switch(r){case"transform":break;case"visibility":t.visible=!!e.nodeValue;break;case"stroke-linecap":t.cap=e.nodeValue;break;case"stroke-linejoin":t.join=e.nodeValue;break;case"stroke-miterlimit":t.miter=e.nodeValue;break;case"stroke-width":t.linewidth=parseFloat(e.nodeValue);break;case"stroke-opacity":case"fill-opacity":case"opacity":t.opacity=e.nodeValue;break;case"fill":t.fill=e.nodeValue;break;case"stroke":t.stroke=e.nodeValue;break;case"id":t.id=e.nodeValue;break}});return t},read:{svg:function(){return m.Utils.read.g.apply(this,arguments)},g:function(e){var t=new m.Group;this.add(t);_.each(e.childNodes,function(e){var n=e.nodeName;if(!n)return;var r=n.replace(/svg\:/ig,"").toLowerCase();if(r in m.Utils.read){var i=m.Utils.read[r].call(this,e);t.add(i)}},this);return m.Utils.applySvgAttributes(e,t)},polygon:function(e,t){var n=e.getAttribute("points");var r=[];n.replace(/([\d\.?]+),([\d\.?]+)/g,function(e,t,n){r.push(new m.Anchor(parseFloat(t),parseFloat(n)))});var i=(new m.Polygon(r,!t)).noStroke();i.fill="black";return m.Utils.applySvgAttributes(e,i)},polyline:function(e){return m.Utils.read.polygon(e,true)},path:function(e){var t=e.getAttribute("d");var n,r;var i,s=false;var o=false;var u=t.match(/[a-df-z][^a-df-z]*/ig);var a=u.length-1;var f=_.flatten(_.map(u,function(e,t){var u,f,l;var c=e[0];var h=c.toLowerCase();i=e.slice(1).trim();i=i.replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(e,t,n){return parseFloat(t)*Math.pow(10,n)});i=i.split(/[\s,]+|(?=\s?[+\-])/);s=c===h;var p,d,v,g,y,b,w,E,S;switch(h){case"z":if(t>=a){o=true}else{f=n.x;l=n.y;u=new m.Anchor(f,l,undefined,undefined,undefined,undefined,m.Commands.close)}break;case"m":case"l":f=parseFloat(i[0]);l=parseFloat(i[1]);u=new m.Anchor(f,l,undefined,undefined,undefined,undefined,h==="m"?m.Commands.move:m.Commands.line);if(s){u.addSelf(n)}n=u;break;case"h":case"v":var x=h==="h"?"x":"y";var T=x==="x"?"y":"x";u=new m.Anchor(undefined,undefined,undefined,undefined,undefined,undefined,m.Commands.line);u[x]=parseFloat(i[0]);u[T]=n[T];if(s){u[x]+=n[x]}n=u;break;case"s":case"c":p=n.x,d=n.y;if(!r){r=(new m.Vector).copy(n)}if(h==="c"){v=parseFloat(i[0]),g=parseFloat(i[1]);y=parseFloat(i[2]),b=parseFloat(i[3]);w=parseFloat(i[4]),E=parseFloat(i[5])}else{S=m.Utils.getReflection(n,r,s);v=S.x,g=S.y;y=parseFloat(i[0]),b=parseFloat(i[1]);w=parseFloat(i[2]),E=parseFloat(i[3])}if(s){v+=p,g+=d;y+=p,b+=d;w+=p,E+=d}if(!_.isObject(n.controls)){m.Anchor.AppendCurveProperties(n)}n.controls.right.set(v-n.x,g-n.y);u=new m.Anchor(w,E,y-w,b-E,undefined,undefined,m.Commands.curve);n=u;r=u.controls.left;break;case"t":case"q":p=n.x,d=n.y;if(!r){r=(new m.Vector).copy(n)}if(r.isZero()){v=p,g=d}else{v=r.x,d=r.y}if(h==="q"){y=parseFloat(i[0]),b=parseFloat(i[1]);w=parseFloat(i[1]),E=parseFloat(i[2])}else{S=m.Utils.getReflection(n,r,s);y=S.x,b=S.y;w=parseFloat(i[0]),E=parseFloat(i[1])}if(s){v+=p,g+=d;y+=p,b+=d;w+=p,E+=d}if(!_.isObject(n.controls)){m.Anchor.AppendCurveProperties(n)}n.controls.right.set(v-n.x,g-n.y);u=new m.Anchor(w,E,y-w,b-E,undefined,undefined,m.Commands.curve);n=u;r=u.controls.left;break;case"a":throw new m.Utils.Error("not yet able to interpret Elliptical Arcs.")}return u}));if(f.length<=1){return}f=_.compact(f);var l=(new m.Polygon(f,o,undefined,true)).noStroke();l.fill="black";return m.Utils.applySvgAttributes(e,l)},circle:function(e){var t=parseFloat(e.getAttribute("cx"));var i=parseFloat(e.getAttribute("cy"));var s=parseFloat(e.getAttribute("r"));var o=m.Resolution;var u=_.map(_.range(o),function(e){var t=e/o;var i=t*f;var u=s*r(i);var a=s*n(i);return new m.Anchor(u,a)},this);var a=(new m.Polygon(u,true,true)).noStroke();a.translation.set(t,i);a.fill="black";return m.Utils.applySvgAttributes(e,a)},ellipse:function(e){var t=parseFloat(e.getAttribute("cx"));var i=parseFloat(e.getAttribute("cy"));var s=parseFloat(e.getAttribute("rx"));var o=parseFloat(e.getAttribute("ry"));var u=m.Resolution;var a=_.map(_.range(u),function(e){var t=e/u;var i=t*f;var a=s*r(i);var l=o*n(i);return new m.Anchor(a,l)},this);var l=(new m.Polygon(a,true,true)).noStroke();l.translation.set(t,i);l.fill="black";return m.Utils.applySvgAttributes(e,l)},rect:function(e){var t=parseFloat(e.getAttribute("x"));var n=parseFloat(e.getAttribute("y"));var r=parseFloat(e.getAttribute("width"));var i=parseFloat(e.getAttribute("height"));var s=r/2;var o=i/2;var u=[new m.Anchor(s,o),new m.Anchor(-s,o),new m.Anchor(-s,-o),new m.Anchor(s,-o)];var a=(new m.Polygon(u,true)).noStroke();a.translation.set(t+s,n+o);a.fill="black";return m.Utils.applySvgAttributes(e,a)},line:function(e){var t=parseFloat(e.getAttribute("x1"));var n=parseFloat(e.getAttribute("y1"));var r=parseFloat(e.getAttribute("x2"));var i=parseFloat(e.getAttribute("y2"));var s=r-t;var o=i-n;var u=s/2;var a=o/2;var f=[new m.Anchor(-u,-a),new m.Anchor(u,a)];var l=(new m.Polygon(f)).noFill();l.translation.set(t+u,n+a);return m.Utils.applySvgAttributes(e,l)}},subdivide:function(e,t,n,r,i,s,o,u,a){var a=a||m.Utils.Curve.RecursionLimit;var f=a+1;return _.map(_.range(0,f),function(a){var l=a/f;var c=C(l,e,n,i,o);var h=C(l,t,r,s,u);return new m.Anchor(c,h)})},getPointOnCubicBezier:function(e,t,n,r,i){var s=1-e;return s*s*s*t+3*s*s*e*n+3*s*e*e*r+e*e*e*i},getCurveFromPoints:function(e,t){var n=e.length,r=n-1;for(var i=0;i<n;i++){var s=e[i];if(!_.isObject(s.controls)){m.Anchor.AppendCurveProperties(s)}var o=t?T(i-1,n):Math.max(i-1,0);var u=t?T(i+1,n):Math.min(i+1,r);var a=e[o];var f=s;var l=e[u];w(a,f,l);f._command=i===0?m.Commands.move:m.Commands.curve;f.controls.left.x=_.isNumber(f.controls.left.x)?f.controls.left.x:f.x;f.controls.left.y=_.isNumber(f.controls.left.y)?f.controls.left.y:f.y;f.controls.right.x=_.isNumber(f.controls.right.x)?f.controls.right.x:f.x;f.controls.right.y=_.isNumber(f.controls.right.y)?f.controls.right.y:f.y}},getControlPoints:function(e,t,i){var s=b(e,t);var o=b(i,t);var u=g(e,t);var f=g(i,t);var c=(s+o)/2;t.u=_.isObject(t.controls.left)?t.controls.left:new m.Vector(0,0);t.v=_.isObject(t.controls.right)?t.controls.right:new m.Vector(0,0);u*=.33;f*=.33;if(o<s){c+=l}else{c-=l}t.controls.left.x=r(c)*u;t.controls.left.y=n(c)*u;c-=a;t.controls.right.x=r(c)*f;t.controls.right.y=n(c)*f;if(!t._relative){t.controls.left.x+=t.x;t.controls.left.y+=t.y;t.controls.right.x+=t.x;t.controls.right.y+=t.y}return t},getReflection:function(e,t,n){var r=t.distanceTo(m.Vector.zero);var i=b(m.Vector.zero,t);return new m.Vector(r*Math.cos(i)+(n?0:e.x),r*Math.sin(i)+(n?0:e.y))},angleBetween:function(e,t){var n,r;if(arguments.length>=4){n=arguments[0]-arguments[2];r=arguments[1]-arguments[3];return i(r,n)}n=e.x-t.x;r=e.y-t.y;return i(r,n)},distanceBetweenSquared:function(e,t){var n=e.x-t.x;var r=e.y-t.y;return n*n+r*r},distanceBetween:function(e,t){return s(y(e,t))},mod:function(e,t){while(e<0){e+=t}return e%t},Collection:function(){Array.call(this);if(arguments.length>1){Array.prototype.push.apply(this,arguments)}else if(arguments[0]&&Array.isArray(arguments[0])){Array.prototype.push.apply(this,arguments[0])}},Error:function(e){this.name="two.js";this.message=e}}});m.Utils.Error.prototype=new Error;m.Utils.Error.prototype.constructor=m.Utils.Error;m.Utils.Collection.prototype=new Array;m.Utils.Collection.constructor=m.Utils.Collection;_.extend(m.Utils.Collection.prototype,Backbone.Events,{pop:function(){var e=Array.prototype.pop.apply(this,arguments);this.trigger(m.Events.remove,[e]);return e},shift:function(){var e=Array.prototype.shift.apply(this,arguments);this.trigger(m.Events.remove,[e]);return e},push:function(){var e=Array.prototype.push.apply(this,arguments);this.trigger(m.Events.insert,arguments);return e},unshift:function(){var e=Array.prototype.unshift.apply(this,arguments);this.trigger(m.Events.insert,arguments);return e},splice:function(){var e=Array.prototype.splice.apply(this,arguments);var t;this.trigger(m.Events.remove,e);if(arguments.length>2){t=this.slice(arguments[0],arguments.length-2);this.trigger(m.Events.insert,t)}return e}});var g=m.Utils.distanceBetween,y=m.Utils.distanceBetweenSquared,b=m.Utils.angleBetween,w=m.Utils.getControlPoints,E=m.Utils.getCurveFromPoints,S=m.Utils.solveSegmentIntersection,x=m.Utils.decoupleShapes,T=m.Utils.mod,N=m.Utils.getBackingStoreRatio,C=m.Utils.getPointOnCubicBezier;_.extend(m.prototype,Backbone.Events,{appendTo:function(e){e.appendChild(this.renderer.domElement);return this},play:function(){m.Utils.setPlaying.call(this,true);return this.trigger(m.Events.play)},pause:function(){this.playing=false;return this.trigger(m.Events.pause)},update:function(){var e=!!this._lastFrame;var t=L();this.frameCount++;if(e){this.timeDelta=parseFloat((t-this._lastFrame).toFixed(3))}this._lastFrame=t;var n=this.width;var r=this.height;var i=this.renderer;if(n!==i.width||r!==i.height){i.setSize(n,r,this.ratio)}this.trigger(m.Events.update,this.frameCount,this.timeDelta);return this.render()},render:function(){this.renderer.render();return this.trigger(m.Events.render,this.frameCount)},add:function(e){var t=e;if(!_.isArray(e)){t=_.toArray(arguments)}this.scene.add(t);return this},remove:function(e){var t=e;if(!_.isArray(e)){t=_.toArray(arguments)}this.scene.remove(t);return this},clear:function(){this.scene.remove(_.toArray(this.scene.children));return this},makeLine:function(e,t,n,r){var i=n-e;var s=r-t;var o=i/2;var u=s/2;var a=[new m.Anchor(-o,-u),new m.Anchor(o,u)];var f=(new m.Polygon(a)).noFill();f.translation.set(e+o,t+u);this.scene.add(f);return f},makeRectangle:function(e,t,n,r){var i=n/2;var s=r/2;var o=[new m.Anchor(-i,-s),new m.Anchor(i,-s),new m.Anchor(i,s),new m.Anchor(-i,s)];var u=new m.Polygon(o,true);u.translation.set(e,t);this.scene.add(u);return u},makeCircle:function(e,t,n){return this.makeEllipse(e,t,n,n)},makeEllipse:function(e,t,i,s){var o=m.Resolution;var u=_.map(_.range(o),function(e){var t=e/o;var u=t*f;var a=i*r(u);var l=s*n(u);return new m.Anchor(a,l)},this);var a=new m.Polygon(u,true,true);a.translation.set(e,t);this.scene.add(a);return a},makeCurve:function(e){var t=arguments.length,n=e;if(!_.isArray(e)){n=[];for(var r=0;r<t;r+=2){var i=arguments[r];if(!_.isNumber(i)){break}var s=arguments[r+1];n.push(new m.Anchor(i,s))}}var o=arguments[t-1];var u=new m.Polygon(n,!(_.isBoolean(o)?o:undefined),true);var a=u.getBoundingClientRect();var f=a.left+a.width/2;var l=a.top+a.height/2;_.each(u.vertices,function(e){e.x-=f;e.y-=l});u.translation.set(f,l);this.scene.add(u);return u},makePolygon:function(e){var t=arguments.length,n=e;if(!_.isArray(e)){n=[];for(var r=0;r<t;r+=2){var i=arguments[r];if(!_.isNumber(i)){break}var s=arguments[r+1];n.push(new m.Anchor(i,s))}}var o=arguments[t-1];var u=new m.Polygon(n,!(_.isBoolean(o)?o:undefined));var a=u.getBoundingClientRect();u.center().translation.set(a.left+a.width/2,a.top+a.height/2);this.scene.add(u);return u},makeGroup:function(e){var t=e;if(!_.isArray(e)){t=_.toArray(arguments)}var n=new m.Group;this.scene.add(n);n.add(t);return n},interpret:function(e){var t=e.tagName.toLowerCase();if(!(t in m.Utils.read)){return null}var n=m.Utils.read[t].call(this,e);this.add(n);return n}});(function(){requestAnimationFrame(arguments.callee);_.each(m.Instances,function(e){if(e.playing){e.update()}})})();if(typeof define==="function"&&define.amd)define(function(){return m});else if(typeof module!="undefined"&&module.exports)module.exports=m})();(function(){var e,t,n,r,i,s;var o=Two.Vector=function(e,t){this.x=e||0;this.y=t||0};_.extend(o,{zero:new Two.Vector});_.extend(o.prototype,Backbone.Events,{set:function(e,t){this.x=e;this.y=t;return this},copy:function(e){this.x=e.x;this.y=e.y;return this},clear:function(){this.x=0;this.y=0;return this},clone:function(){return new o(this.x,this.y)},add:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;return this},addSelf:function(e){this.x+=e.x;this.y+=e.y;return this},sub:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;return this},subSelf:function(e){this.x-=e.x;this.y-=e.y;return this},multiplySelf:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divideScalar:function(e){if(e){this.x/=e;this.y/=e}else{this.set(0,0)}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){i=this.x-e.x,s=this.y-e.y;return i*i+s*s},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return this.distanceTo(e)<1e-4},lerp:function(e,t){n=(e.x-this.x)*t+this.x;r=(e.y-this.y)*t+this.y;return this.set(n,r)},isZero:function(){return this.length()<1e-4},toString:function(){return this.x+","+this.y},toObject:function(){return{x:this.x,y:this.y}}});var u={set:function(e,t){this._x=e;this._y=t;return this.trigger(Two.Events.change)},copy:function(e){this._x=e.x;this._y=e.y;return this.trigger(Two.Events.change)},clear:function(){this._x=0;this._y=0;return this.trigger(Two.Events.change)},clone:function(){return new o(this._x,this._y)},add:function(e,t){this._x=e.x+t.x;this._y=e.y+t.y;return this.trigger(Two.Events.change)},addSelf:function(e){this._x+=e.x;this._y+=e.y;return this.trigger(Two.Events.change)},sub:function(e,t){this._x=e.x-t.x;this._y=e.y-t.y;return this.trigger(Two.Events.change)},subSelf:function(e){this._x-=e.x;this._y-=e.y;return this.trigger(Two.Events.change)},multiplySelf:function(e){this._x*=e.x;this._y*=e.y;return this.trigger(Two.Events.change)},multiplyScalar:function(e){this._x*=e;this._y*=e;return this.trigger(Two.Events.change)},divideScalar:function(e){if(e){this._x/=e;this._y/=e;return this.trigger(Two.Events.change)}return this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this._x*e.x+this._y*e.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){i=this._x-e.x,s=this._y-e.y;return i*i+s*s},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return this.distanceTo(e)<1e-4},lerp:function(e,t){n=(e.x-this._x)*t+this._x;r=(e.y-this._y)*t+this._y;return this.set(n,r)},isZero:function(){return this.length()<1e-4},toString:function(){return this._x+","+this._y},toObject:function(){return{x:this._x,y:this._y}}};var a={get:function(){return this._x},set:function(e){this._x=e;this.trigger(Two.Events.change,"x")}};var f={get:function(){return this._y},set:function(e){this._y=e;this.trigger(Two.Events.change,"y")}};Two.Vector.prototype.bind=Two.Vector.prototype.on=function(){if(!this._bound){this._x=this.x;this._y=this.y;Object.defineProperty(this,"x",a);Object.defineProperty(this,"y",f);_.extend(this,u);this._bound=true}Backbone.Events.bind.apply(this,arguments);return this}})();(function(){var e=Two.Commands,t,n,r,i,s;var o=Two.Anchor=function(t,n,r,i,s,u,a){Two.Vector.call(this,t,n);this._broadcast=_.bind(function(){this.trigger(Two.Events.change)},this);this._command=a||e.move;this._relative=true;if(!a){return this}o.AppendCurveProperties(this);if(_.isNumber(r)){this.controls.left.x=r}if(_.isNumber(i)){this.controls.left.y=i}if(_.isNumber(s)){this.controls.right.x=s}if(_.isNumber(u)){this.controls.right.y=u}};_.extend(o,{AppendCurveProperties:function(e){t=e._x||e.x;n=e._y||e.y;e.controls={left:new Two.Vector(0,0),right:new Two.Vector(0,0)}}});var u={listen:function(){if(!_.isObject(this.controls)){o.AppendCurveProperties(this)}_.each(this.controls,function(e){e.bind(Two.Events.change,this._broadcast)},this);return this},ignore:function(){_.each(this.controls,function(e){e.unbind(Two.Events.change,this._broadcast)},this);return this},clone:function(){i=this.controls;s=new Two.Anchor(this.x,this.y,i&&i.left.x,i&&i.left.y,i&&i.right.x,i&&i.right.y,this.command);s.relative=this._relative;return s},toObject:function(){r={x:this.x,y:this.y};if(this._command){r.command=this._command}if(this._relative){r.relative=this._relative}if(this.controls){r.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}}return r}};Object.defineProperty(o.prototype,"command",{get:function(){return this._command},set:function(t){this._command=t;if(this._command===e.curve&&!_.isObject(this.controls)){o.AppendCurveProperties(this)}return this.trigger(Two.Events.change)}});Object.defineProperty(o.prototype,"relative",{get:function(){return this._relative},set:function(e){if(this._relative==e){return this}this._relative=!!e;return this.trigger(Two.Events.change)}});_.extend(o.prototype,Two.Vector.prototype,u);Two.Anchor.prototype.bind=Two.Anchor.prototype.on=function(){Two.Vector.prototype.bind.apply(this,arguments);_.extend(this,u)};Two.Anchor.prototype.unbind=Two.Anchor.prototype.off=function(){Two.Vector.prototype.unbind.apply(this,arguments);_.extend(this,u)}})();(function(){var e=_.range(6),t=Math.cos,n=Math.sin,r=Math.tan;var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B,j,F,I,q,R,U,o,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt=[];var rt=Two.Matrix=function(e,t,n,r,i,s){this.elements=new Two.Array(9);var o=e;if(!_.isArray(o)){o=_.toArray(arguments)}this.identity().set(o)};_.extend(rt,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(e,t,n){if(t.length<=3){m,g,y;i=t[0]||0,s=t[1]||0,o=t[2]||0;a=e;m=a[0]*i+a[1]*s+a[2]*o;g=a[3]*i+a[4]*s+a[5]*o;y=a[6]*i+a[7]*s+a[8]*o;return{x:m,y:g,z:y}}w=e[0],E=e[1],S=e[2];x=e[3],T=e[4],N=e[5];C=e[6],k=e[7],L=e[8];A=t[0],O=t[1],M=t[2];D=t[3],P=t[4],H=t[5];B=t[6],j=t[7],F=t[8];n=n||new Two.Array(9);n[0]=w*A+E*D+S*B;n[1]=w*O+E*P+S*j;n[2]=w*M+E*H+S*F;n[3]=x*A+T*D+N*B;n[4]=x*O+T*P+N*j;n[5]=x*M+T*H+N*F;n[6]=C*A+k*D+L*B;n[7]=C*O+k*P+L*j;n[8]=C*M+k*H+L*F;return n}});_.extend(rt.prototype,Backbone.Events,{set:function(e,t,n,r,i,s){v=e,R=arguments.length;if(!_.isArray(v)){v=_.toArray(arguments)}_.each(v,function(e,t){if(_.isNumber(e)){this.elements[t]=e}},this);return this.trigger(Two.Events.change)},identity:function(){this.set(rt.Identity);return this},multiply:function(e,t,n,r,i,s,o,u,a){v=arguments,R=v.length;if(R<=1){_.each(this.elements,function(t,n){this.elements[n]=t*e},this);return this.trigger(Two.Events.change)}if(R<=3){m,g,y;e=e||0,t=t||0,n=n||0;i=this.elements;m=i[0]*e+i[1]*t+i[2]*n;g=i[3]*e+i[4]*t+i[5]*n;y=i[6]*e+i[7]*t+i[8]*n;return{x:m,y:g,z:y}}I=this.elements;q=v;w=I[0],E=I[1],S=I[2];x=I[3],T=I[4],N=I[5];C=I[6],k=I[7],L=I[8];A=q[0],O=q[1],M=q[2];D=q[3],P=q[4],H=q[5];B=q[6],j=q[7],F=q[8];this.elements[0]=w*A+E*D+S*B;this.elements[1]=w*O+E*P+S*j;this.elements[2]=w*M+E*H+S*F;this.elements[3]=x*A+T*D+N*B;this.elements[4]=x*O+T*P+N*j;this.elements[5]=x*M+T*H+N*F;this.elements[6]=C*A+k*D+L*B;this.elements[7]=C*O+k*P+L*j;this.elements[8]=C*M+k*H+L*F;return this.trigger(Two.Events.change)},inverse:function(e){i=this.elements;e=e||new Two.Matrix;z=i[0],W=i[1],X=i[2];V=i[3],$=i[4],J=i[5];K=i[6],Q=i[7],G=i[8];Y=G*$-J*Q;Z=-G*V+J*K;et=Q*V-$*K;tt=z*Y+W*Z+X*et;if(!tt){return null}tt=1/tt;e.elements[0]=Y*tt;e.elements[1]=(-G*W+X*Q)*tt;e.elements[2]=(J*W-X*$)*tt;e.elements[3]=Z*tt;e.elements[4]=(G*z-X*K)*tt;e.elements[5]=(-J*z+X*V)*tt;e.elements[6]=et*tt;e.elements[7]=(-Q*z+W*K)*tt;e.elements[8]=($*z-W*V)*tt;return e},scale:function(e,t){R=arguments.length;if(R<=1){t=e}return this.multiply(e,0,0,0,t,0,0,0,1)},rotate:function(e){o=t(e);U=n(e);return this.multiply(o,-U,0,U,o,0,0,0,1)},translate:function(e,t){return this.multiply(1,0,e,0,1,t,0,0,1)},skewX:function(e){i=r(e);return this.multiply(1,i,0,0,1,0,0,0,1)},skewY:function(e){i=r(e);return this.multiply(1,0,0,i,1,0,0,0,1)},toString:function(e){this.toArray(e,nt);return nt.join(" ")},toArray:function(e,t){v=this.elements;p=!!t;i=parseFloat(v[0].toFixed(3));s=parseFloat(v[1].toFixed(3));o=parseFloat(v[2].toFixed(3));u=parseFloat(v[3].toFixed(3));a=parseFloat(v[4].toFixed(3));f=parseFloat(v[5].toFixed(3));if(!!e){l=parseFloat(v[6].toFixed(3));c=parseFloat(v[7].toFixed(3));h=parseFloat(v[8].toFixed(3));if(p){t[0]=i;t[1]=u;t[2]=l;t[3]=s;t[4]=a;t[5]=c;t[6]=o;t[7]=f;t[8]=h;return}return[i,u,l,s,a,c,o,f,h]}if(p){t[0]=i;t[1]=u;t[2]=s;t[3]=a;t[4]=o;t[5]=f;return}return[i,u,s,a,o,f]},clone:function(){i=this.elements[0];s=this.elements[1];o=this.elements[2];u=this.elements[3];a=this.elements[4];f=this.elements[5];l=this.elements[6];c=this.elements[7];h=this.elements[8];return new Two.Matrix(i,s,o,u,a,f,l,c,h)}})})();(function(){var e=Two.Utils.mod,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,m,g;var S={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(e,t){s=e;n=document.createElementNS(this.ns,s);if(s==="svg"){t=_.defaults(t||{},{version:this.version})}if(_.isObject(t)){S.setAttributes(n,t)}return n},setAttribute:function(e,t){this.setAttribute(t,e)},setAttributes:function(e,t){_.each(t,S.setAttribute,e);return this},removeAttribute:function(e,t){this.removeAttribute(t)},removeAttributes:function(e,t){_.each(t,S.removeAttribute,e);return this},toString:function(t,n){var r=t.length,i=r-1,s;return _.map(t,function(o,u){var a;var f=n?e(u-1,r):Math.max(u-1,0);var l=n?e(u+1,r):Math.min(u+1,i);var c=t[f];var h=t[l];var p,d,v,m,g,y,b,w;var E=o.x.toFixed(3);var S=o.y.toFixed(3);switch(o._command){case Two.Commands.close:a=Two.Commands.close;break;case Two.Commands.curve:var g=c.controls&&c.controls.right||c;var y=o.controls&&o.controls.left||o;if(c._relative){p=(g.x+c.x).toFixed(3);d=(g.y+c.y).toFixed(3)}else{p=g.x.toFixed(3);d=g.y.toFixed(3)}if(o._relative){v=(y.x+o.x).toFixed(3);m=(y.y+o.y).toFixed(3)}else{v=y.x.toFixed(3);m=y.y.toFixed(3)}a=(u===0?Two.Commands.move:Two.Commands.curve)+" "+p+" "+d+" "+v+" "+m+" "+E+" "+S;break;case Two.Commands.move:s=o;a=Two.Commands.move+" "+E+" "+S;break;default:a=o._command+" "+E+" "+S}if(u>=i&&n){if(o._command===Two.Commands.curve){h=s;b=o.controls&&o.controls.right||o;w=h.controls&&h.controls.left||h;if(o._relative){p=(b.x+o.x).toFixed(3);d=(b.y+o.y).toFixed(3)}else{p=b.x.toFixed(3);d=b.y.toFixed(3)}if(h._relative){v=(w.x+h.x).toFixed(3);m=(w.y+h.y).toFixed(3)}else{v=w.x.toFixed(3);m=w.y.toFixed(3)}E=h.x.toFixed(3);S=h.y.toFixed(3);a+=" C "+p+" "+d+" "+v+" "+m+" "+E+" "+S}a+=" Z"}return a}).join(" ")},group:{appendChild:function(e){n=this.domElement.querySelector("#"+e);if(n){this.elem.appendChild(n)}},removeChild:function(e){n=this.domElement.querySelector("#"+e);if(n){this.elem.removeChild(n)}},renderChild:function(e){S[e._renderer.type].render.call(e,this)},render:function(e){this._update();if(!this._renderer.elem){this._renderer.elem=S.createElement("g",{id:this.id});e.appendChild(this._renderer.elem)}t=this._matrix.manual||this._flagMatrix;var n={domElement:e,elem:this._renderer.elem};if(t){this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")")}_.each(this.children,S.group.renderChild,e);if(this._flagAdditions){_.each(this.additions,S.group.appendChild,n)}if(this._flagSubtractions){_.each(this.subtractions,S.group.removeChild,n)}return this.flagReset()}},polygon:{render:function(e){this._update();if(!this._renderer.elem){this._renderer.elem=S.createElement("path",{id:this.id});e.appendChild(this._renderer.elem)}n=this._renderer.elem;t=this._matrix.manual||this._flagMatrix;if(t){n.setAttribute("transform","matrix("+this._matrix.toString()+")")}if(this._flagVertices){vertices=S.toString(this._vertices,this._closed);n.setAttribute("d",vertices)}if(this._flagFill){n.setAttribute("fill",this._fill)}if(this._flagStroke){n.setAttribute("stroke",this._stroke)}if(this._flagLinewidth){n.setAttribute("stroke-width",this._linewidth)}if(this._flagOpacity){n.setAttribute("stroke-opacity",this._opacity);n.setAttribute("fill-opacity",this._opacity)}if(this._flagVisible){n.setAttribute("visibility",this._visible?"visible":"hidden")}if(this._flagCap){n.setAttribute("stroke-linecap",this._cap)}if(this._flagJoin){n.setAttribute("stroke-linejoin",this._join)}if(this._flagMiter){n.setAttribute("stroke-miterlimit",this.miter)}return this.flagReset()}}};var x=Two[Two.Types.svg]=function(e){this.domElement=e.domElement||S.createElement("svg");this.scene=new Two.Group;this.scene.parent=this};_.extend(x,{Utils:S});_.extend(x.prototype,Backbone.Events,{setSize:function(e,t){this.width=e;this.height=t;S.setAttributes(this.domElement,{width:e,height:t});return this},render:function(){S.group.render.call(this.scene,this.domElement);return this}})})();(function(){function P(e){e.setTransform(1,0,0,1,0,0)}var e=this;var t=Two.Utils.mod;var n=Two.Utils.getRatio;var r,i,s,o,u,a,f,l,c,h,p,d,v;var m,g,y,b,w,E,S,x,T,N,C,k,L,A,O;var M={group:{renderChild:function(e){M[e._renderer.type].render.call(e,this)},render:function(e){this._update();r=this._matrix.elements;e.save();e.transform(r[0],r[3],r[1],r[4],r[2],r[5]);_.each(this.children,M.group.renderChild,e);e.restore();return this.flagReset()}},polygon:{render:function(e){this._update();r=this._matrix.elements;i=this.stroke;s=this.linewidth;o=this.fill;u=this.opacity;a=this.visible;f=this.cap;l=this.join;c=this.miter;h=this.closed;p=this._vertices;d=p.length;v=d-1;if(!a){return this}e.save();if(r){e.transform(r[0],r[3],r[1],r[4],r[2],r[5])}if(o){e.fillStyle=o}if(i){e.strokeStyle=i}if(s){e.lineWidth=s}if(c){e.miterLimit=c}if(l){e.lineJoin=l}if(f){e.lineCap=f}if(_.isNumber(u)){e.globalAlpha=u}e.beginPath();_.each(p,function(n,r){A=n.x.toFixed(3),O=n.y.toFixed(3);switch(n._command){case Two.Commands.close:e.closePath();break;case Two.Commands.curve:g=h?t(r-1,d):Math.max(r-1,0);m=h?t(r+1,d):Math.min(r+1,v);y=p[g],b=p[m];N=y.controls&&y.controls.right||y;C=n.controls&&n.controls.left||n;if(y._relative){x=(N.x+y.x).toFixed(3);T=(N.y+y.y).toFixed(3)}else{x=N.x.toFixed(3);T=N.y.toFixed(3)}if(n._relative){E=(C.x+n.x).toFixed(3);S=(C.y+n.y).toFixed(3)}else{E=C.x.toFixed(3);S=C.y.toFixed(3)}e.bezierCurveTo(x,T,E,S,A,O);if(r>=v&&h){b=w;k=n.controls&&n.controls.right||n;L=b.controls&&b.controls.left||b;if(n._relative){x=(k.x+n.x).toFixed(3);T=(k.y+n.y).toFixed(3)}else{x=k.x.toFixed(3);T=k.y.toFixed(3)}if(b._relative){E=(L.x+b.x).toFixed(3);S=(L.y+b.y).toFixed(3)}else{E=L.x.toFixed(3);S=L.y.toFixed(3)}A=b.x.toFixed(3);O=b.y.toFixed(3);e.bezierCurveTo(x,T,E,S,A,O)}break;case Two.Commands.line:e.lineTo(A,O);break;case Two.Commands.move:w=n;e.moveTo(A,O);break}});if(h){e.closePath()}e.fill();e.stroke();e.restore();return this.flagReset()}}};var D=Two[Two.Types.canvas]=function(e){this.domElement=e.domElement||document.createElement("canvas");this.ctx=this.domElement.getContext("2d");this.overdraw=e.overdraw||false;this.scene=new Two.Group;this.scene.parent=this};_.extend(D,{Utils:M});_.extend(D.prototype,Backbone.Events,{setSize:function(e,t,r){this.width=e;this.height=t;this.ratio=_.isUndefined(r)?n(this.ctx):r;this.domElement.width=e*this.ratio;this.domElement.height=t*this.ratio;_.extend(this.domElement.style,{width:e+"px",height:t+"px"});return this},render:function(){var e=this.ratio===1;if(!e){this.ctx.save();this.ctx.scale(this.ratio,this.ratio)}if(!this.overdraw){this.ctx.clearRect(0,0,this.width,this.height)}M.group.render.call(this.scene,this.ctx);if(!e){this.ctx.restore()}return this}})})();(function(){var e=Two[Two.Types.canvas],t=Two.Matrix.Multiply,n=Two.Utils.mod,r=[1,0,0,0,1,0,0,0,1],i=new Two.Array(9),s=Two.Utils.getRatio;var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut;var at={canvas:document.createElement("canvas"),uv:new Two.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{renderChild:function(e){at[e._renderer.type].render.call(e,this.gl,this.program)},render:function(e,n){this._update();o=this.parent;u=o._matrix&&o._matrix.manual||o._flagMatrix;a=this._matrix.manual||this._flagMatrix;if(u||a){if(!this._renderer.matrix){this._renderer.matrix=new Two.Array(9)}this._matrix.toArray(true,i);t(i,o._renderer.matrix,this._renderer.matrix);this._renderer.scale=this._scale*o._renderer.scale;if(u){this._flagMatrix=true}}_.each(this.children,at.group.renderChild,{gl:e,program:n});return this.flagReset()}},polygon:{render:function(e,n){if(!this._visible||!this._opacity){return this}o=this.parent;u=o._matrix.manual||o._flagMatrix;a=this._matrix.manual||this._flagMatrix;f=this._flagVertices||this._flagFill||this._flagStroke||this._flagLinewidth||this._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale;this._update();if(u||a){if(!this._renderer.matrix){this._renderer.matrix=new Two.Array(9)}this._matrix.toArray(true,i);t(i,o._renderer.matrix,this._renderer.matrix);this._renderer.scale=this._scale*o._renderer.scale}if(f){if(!this._renderer.rect){this._renderer.rect={}}if(!this._renderer.triangles){this._renderer.triangles=new Two.Array(12)}at.getBoundingClientRect(this._vertices,this._linewidth,this._renderer.rect);at.getTriangles(this._renderer.rect,this._renderer.triangles);at.updateBuffer(e,this,n);at.updateTexture(e,this)}e.bindBuffer(e.ARRAY_BUFFER,this._renderer.textureCoordsBuffer);e.vertexAttribPointer(n.textureCoords,2,e.FLOAT,false,0,0);e.bindTexture(e.TEXTURE_2D,this._renderer.texture);e.uniformMatrix3fv(n.matrix,false,this._renderer.matrix);e.bindBuffer(e.ARRAY_BUFFER,this._renderer.buffer);e.vertexAttribPointer(n.position,2,e.FLOAT,false,0,0);e.drawArrays(e.TRIANGLES,0,6);return this.flagReset()}},getBoundingClientRect:function(e,t,n){l=Infinity,c=-Infinity;h=Infinity,p=-Infinity;_.each(e,function(e,t){d=e.x,v=e.y,m,g,y,b,w=e.controls;h=Math.min(v,h);l=Math.min(d,l);c=Math.max(d,c);p=Math.max(v,p);if(!e.controls){return}E=w.left;S=w.right;if(!E||!S){return}m=e._relative?E.x+d:E.x,g=e._relative?E.y+v:E.y;y=e._relative?S.x+d:S.x,b=e._relative?S.y+v:S.y;if(!m||!g||!y||!b){return}h=Math.min(g,b,h);l=Math.min(m,y,l);c=Math.max(m,y,c);p=Math.max(g,b,p)});if(_.isNumber(t)){h-=t;l-=t;c+=t;p+=t}x=c-l;T=p-h;n.top=h;n.left=l;n.right=c;n.bottom=p;n.width=x;n.height=T;if(!n.centroid){n.centroid={}}n.centroid.x=-l;n.centroid.y=-h},getTriangles:function(e,t){h=e.top;l=e.left;c=e.right;p=e.bottom;t[0]=l;t[1]=h;t[2]=c;t[3]=h;t[4]=l;t[5]=p;t[6]=l;t[7]=p;t[8]=c;t[9]=h;t[10]=c;t[11]=p},updateCanvas:function(e){N=e._vertices;C=this.canvas;k=this.ctx;L=e._renderer.scale;A=e._stroke;O=e._linewidth*L;M=e._fill;D=e._opacity;P=e._cap;H=e._join;B=e._miter;j=e._closed;F=N.length;I=F-1;C.width=Math.max(Math.ceil(e._renderer.rect.width*L),1);C.height=Math.max(Math.ceil(e._renderer.rect.height*L),1);q=e._renderer.rect.centroid;R=q.x*L,U=q.y*L;k.clearRect(0,0,C.width,C.height);if(M){k.fillStyle=M}if(A){k.strokeStyle=A}if(O){k.lineWidth=O}if(B){k.miterLimit=B}if(H){k.lineJoin=H}if(P){k.lineCap=P}if(_.isNumber(D)){k.globalAlpha=D}k.beginPath();_.each(N,function(e,t){z,W,m,y,X,V,$,J,K,Q,G,E;d=(e.x*L+R).toFixed(3),v=(e.y*L+U).toFixed(3);switch(e._command){case Two.Commands.close:k.closePath();break;case Two.Commands.curve:W=j?n(t-1,F):Math.max(t-1,0);z=j?n(t+1,F):Math.min(t+1,I);m=N[W],y=N[z];K=m.controls&&m.controls.right||m;Q=e.controls&&e.controls.left||e;if(m._relative){$=((K.x+m.x)*L+R).toFixed(3);J=((K.y+m.y)*L+U).toFixed(3)}else{$=(K.x*L+R).toFixed(3);J=(K.y*L+U).toFixed(3)}if(e._relative){X=((Q.x+e.x)*L+R).toFixed(3);V=((Q.y+e.y)*L+U).toFixed(3)}else{X=(Q.x*L+R).toFixed(3);V=(Q.y*L+U).toFixed(3)}k.bezierCurveTo($,J,X,V,d,v);if(t>=I&&j){y=b;G=e.controls&&e.controls.right||e;E=y.controls&&y.controls.left||y;if(e._relative){$=((G.x+e.x)*L+R).toFixed(3);J=((G.y+e.y)*L+U).toFixed(3)}else{$=(G.x*L+R).toFixed(3);J=(G.y*L+U).toFixed(3)}if(y._relative){X=((E.x+y.x)*L+R).toFixed(3);V=((E.y+y.y)*L+R).toFixed(3)}else{X=(E.x*L+R).toFixed(3);V=(E.y*L+U).toFixed(3)}d=(y.x*L+R).toFixed(3);v=(y.y*L+U).toFixed(3);k.bezierCurveTo($,J,X,V,d,v)}break;case Two.Commands.line:k.lineTo(d,v);break;case Two.Commands.move:b=e;k.moveTo(d,v);break}});if(j){k.closePath()}k.fill();k.stroke()},updateTexture:function(e,t){this.updateCanvas(t);if(t._renderer.texture){e.deleteTexture(t._renderer.texture)}e.bindBuffer(e.ARRAY_BUFFER,t._renderer.textureCoordsBuffer);t._renderer.texture=e.createTexture();e.bindTexture(e.TEXTURE_2D,t._renderer.texture);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);if(this.canvas.width<=0||this.canvas.height<=0){return}e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(e,t,n){if(_.isObject(t._renderer.buffer)){e.deleteBuffer(t._renderer.buffer)}t._renderer.buffer=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t._renderer.buffer);e.enableVertexAttribArray(n.position);e.bufferData(e.ARRAY_BUFFER,t._renderer.triangles,e.STATIC_DRAW);if(_.isObject(t._renderer.textureCoordsBuffer)){e.deleteBuffer(t._renderer.textureCoordsBuffer)}t._renderer.textureCoordsBuffer=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t._renderer.textureCoordsBuffer);e.enableVertexAttribArray(n.textureCoords);e.bufferData(e.ARRAY_BUFFER,this.uv,e.STATIC_DRAW)},program:{create:function(e,t){Y=e.createProgram();_.each(t,function(t){e.attachShader(Y,t)});e.linkProgram(Y);Z=e.getProgramParameter(Y,e.LINK_STATUS);if(!Z){nt=e.getProgramInfoLog(Y);e.deleteProgram(Y);throw new Two.Utils.Error("unable to link program: "+nt)}return Y}},shaders:{create:function(e,t,n){et=e.createShader(e[n]);e.shaderSource(et,t);e.compileShader(et);tt=e.getShaderParameter(et,e.COMPILE_STATUS);if(!tt){nt=e.getShaderInfoLog(et);e.deleteShader(et);throw new Two.Utils.Error("unable to compile shader "+et+": "+nt)}return et},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["attribute vec2 a_position;","attribute vec2 a_textureCoords;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","","varying vec2 v_textureCoords;","","void main() {","   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_textureCoords;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  gl_FragColor = texture2D(u_image, v_textureCoords);","}"].join("\n")}};at.ctx=at.canvas.getContext("2d");var ft=Two[Two.Types.webgl]=function(e){this.domElement=e.domElement||document.createElement("canvas");this.scene=new Two.Group;this.scene.parent=this;this._renderer={matrix:new Two.Array(r),scale:1};this._flagMatrix=true;ut=_.defaults(e||{},{antialias:false,alpha:true,premultipliedAlpha:true,stencil:true,preserveDrawingBuffer:true,overdraw:false});this.overdraw=ut.overdraw;rt=this.ctx=this.domElement.getContext("webgl",ut)||this.domElement.getContext("experimental-webgl",ut);if(!this.ctx){throw new Two.Utils.Error("unable to create a webgl context. Try using another renderer.")}ot=at.shaders.create(rt,at.shaders.vertex,at.shaders.types.vertex);st=at.shaders.create(rt,at.shaders.fragment,at.shaders.types.fragment);this.program=at.program.create(rt,[ot,st]);rt.useProgram(this.program);this.program.position=rt.getAttribLocation(this.program,"a_position");this.program.matrix=rt.getUniformLocation(this.program,"u_matrix");this.program.textureCoords=rt.getAttribLocation(this.program,"a_textureCoords");rt.disable(rt.DEPTH_TEST);rt.enable(rt.BLEND);rt.blendEquationSeparate(rt.FUNC_ADD,rt.FUNC_ADD);rt.blendFuncSeparate(rt.SRC_ALPHA,rt.ONE_MINUS_SRC_ALPHA,rt.ONE,rt.ONE_MINUS_SRC_ALPHA)};_.extend(ft.prototype,Backbone.Events,{setSize:function(e,t,n){this.width=e;this.height=t;this.ratio=_.isUndefined(n)?s(this.ctx):n;this.domElement.width=e*this.ratio;this.domElement.height=t*this.ratio;_.extend(this.domElement.style,{width:e+"px",height:t+"px"});e*=this.ratio;t*=this.ratio;this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio;this._flagMatrix=true;this.ctx.viewport(0,0,e,t);it=this.ctx.getUniformLocation(this.program,"u_resolution");this.ctx.uniform2f(it,e,t);return this},render:function(){rt=this.ctx;if(!this.overdraw){rt.clear(rt.COLOR_BUFFER_BIT|rt.DEPTH_BUFFER_BIT)}at.group.render.call(this.scene,rt,this.program);this._flagMatrix=false;return this}})})();(function(){var e=Two.Vector.zero,t;var n=Two.Shape=function(e){this._renderer={};this.id=Two.Identifier+Two.uniqueId();this._matrix=new Two.Matrix;this.translation=new Two.Vector;this.translation.bind(Two.Events.change,_.bind(n.FlagMatrix,this));this.rotation=0;this.scale=1};_.extend(n,Backbone.Events,{FlagMatrix:function(){this._flagMatrix=true},MakeObservable:function(e){Object.defineProperty(e,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e;this._flagMatrix=true}});Object.defineProperty(e,"scale",{get:function(){return this._scale},set:function(e){this._scale=e;this._flagMatrix=true;this._flagScale=true}})}});_.extend(n.prototype,{_flagMatrix:true,_rotation:0,_scale:1,addTo:function(e){e.add(this);return this},clone:function(){t=new n;t.translation.copy(this.translation);t.rotation=this.rotation;t.scale=this.scale;_.each(n.Properties,function(e){t[e]=this[e]},this);return t._update()},_update:function(){if(!this._matrix.manual&&this._flagMatrix){this._matrix.identity().translate(this.translation.x,this.translation.y).scale(this.scale).rotate(this.rotation)}if(this.parent&&_.isFunction(this.parent._update)){this.parent._update()}return this},flagReset:function(){this._flagMatrix=false;this._flagScale=false;return this}});n.MakeObservable(n.prototype)})();(function(){function U(e,t,n){b=t.controls&&t.controls.right;y=e.controls&&e.controls.left;M=t.x,D=t.y;P=(b||t).x,H=(b||t).y;B=(y||e).x,j=(y||e).y;F=e.x,I=e.y;if(b&&t._relative){P+=t.x;H+=t.y}if(y&&e._relative){B+=e.x;j+=e.y}return Two.Utils.subdivide(M,D,P,H,B,j,F,I,n)}var e=Math.min,t=Math.max,n=Math.round,r=Two.Utils.getComputedMatrix;var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B,j,F,I;var q={};_.each(Two.Commands,function(e,t){q[t]=new RegExp(e)});var R=Two.Polygon=function(e,t,n,r){Two.Shape.call(this);this._renderer.type="polygon";this._closed=!!t;this._curved=!!n;this.beginning=0;this.ending=1;this.fill="#fff";this.stroke="#000";this.linewidth=1;this.opacity=1;this.visible=true;this.cap="butt";this.join="miter";this.miter=4;this._vertices=[];this.vertices=e;this.automatic=!r};_.extend(R,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],FlagVertices:function(){this._flagVertices=true},MakeObservable:function(n){Two.Shape.MakeObservable(n);_.each(R.Properties.slice(0,8),function(e){var t="_"+e;var r="_flag"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(n,e,{get:function(){return this[t]},set:function(e){this[t]=e;this[r]=true}})});Object.defineProperty(n,"closed",{get:function(){return this._closed},set:function(e){this._closed=!!e;this._flagVertices=true}});Object.defineProperty(n,"curved",{get:function(){return this._curved},set:function(e){this._curved=!!e;this._flagVertices=true}});Object.defineProperty(R.prototype,"automatic",{get:function(){return this._automatic},set:function(e){if(e===this._automatic){return}this._automatic=!!e;method=this._automatic?"ignore":"listen";_.each(this.vertices,function(e){e[method]()})}});Object.defineProperty(n,"beginning",{get:function(){return this._beginning},set:function(n){this._beginning=e(t(n,0),this._ending);this._flagVertices=true}});Object.defineProperty(n,"ending",{get:function(){return this._ending},set:function(n){this._ending=e(t(n,this._beginning),1);this._flagVertices=true}});Object.defineProperty(n,"vertices",{get:function(){return this._collection},set:function(e){var t=_.bind(R.FlagVertices,this);var n=_.bind(function(e){_.each(e,function(e){e.bind(Two.Events.change,t)},this);t()},this);var r=_.bind(function(e){_.each(e,function(e){e.unbind(Two.Events.change,t)},this);t()},this);if(this._collection){this._collection.unbind()}this._collection=new Two.Utils.Collection(e.slice(0));this._collection.bind(Two.Events.insert,n);this._collection.bind(Two.Events.remove,r);verticesChanged=true;n(this._collection)}})}});_.extend(R.prototype,Two.Shape.prototype,{_flagVertices:true,_flagFill:true,_flagStroke:true,_flagLinewidth:true,_flagOpacity:true,_flagVisible:true,_flagCap:true,_flagJoin:true,_flagMiter:true,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:true,_cap:"round",_join:"round",_miter:4,_closed:true,_curved:false,_automatic:true,_beginning:0,_ending:1,clone:function(e){e=e||this.parent;h=_.map(this.vertices,function(e){return e.clone()});p=new R(h,this.closed,this.curved,!this.automatic);_.each(Two.Shape.Properties,function(e){p[e]=this[e]},this);p.translation.copy(this.translation);p.rotation=this.rotation;p.scale=this.scale;e.add(p);return p},toObject:function(){var e={vertices:_.map(this.vertices,function(e){return e.toObject()})};_.each(Two.Shape.Properties,function(t){e[t]=this[t]},this);e.translation=this.translation.toObject;e.rotation=this.rotation;e.scale=this.scale;return e},noFill:function(){this.fill="transparent";return this},noStroke:function(){this.stroke="transparent";return this},corner:function(){d=this.getBoundingClientRect(true);d.centroid={x:d.left+d.width/2,y:d.top+d.height/2};_.each(this.vertices,function(e){e.addSelf(d.centroid)});return this},center:function(){d=this.getBoundingClientRect(true);d.centroid={x:d.left+d.width/2,y:d.top+d.height/2};_.each(this.vertices,function(e){e.subSelf(d.centroid)});return this},remove:function(){if(!this.parent){return this}this.parent.remove(this);return this},getBoundingClientRect:function(n){this._update();A=!!n?this._matrix:r(this);m=this.linewidth/2,g;y=Infinity,b=-Infinity;w=Infinity,E=-Infinity;_.each(this._vertices,function(n){S=n.x,x=n.y;n=A.multiply(S,x,1);w=e(n.y-m,w);y=e(n.x-m,y);b=t(n.x+m,b);E=t(n.y+m,E)});return{top:w,left:y,right:b,bottom:E,width:b-y,height:E-w}},plot:function(){if(this.curved){Two.Utils.getCurveFromPoints(this._vertices,this.closed);return this}_.each(this._vertices,function(e,t){e._command=t===0?Two.Commands.move:Two.Commands.line},this);return this},subdivide:function(e){this._update();u=this.vertices.length-1;N=this.vertices[u];a=this._closed||this.vertices[u]._command===Two.Commands.close;O=this._curved;h=[];_.each(this.vertices,function(t,n){if(n<=0&&!a){N=t;return}if(t.command===Two.Commands.move){h.push(new Two.Anchor(N.x,N.y));if(n>0){h[h.length-1].command=Two.Commands.line}N=L=t;return}var r=U(t,N,e);h=h.concat(r);_.each(r,function(e,t){if(t<=0&&N.command===Two.Commands.move){e.command=Two.Commands.move}else{e.command=Two.Commands.line}});if(n>=u){if(this._closed&&this._automatic){N=t;t=L;r=U(t,N,e);h=h.concat(r);_.each(r,function(e,t){if(t<=0&&N.command===Two.Commands.move){e.command=Two.Commands.move}else{e.command=Two.Commands.line}})}else if(a){h.push(new Two.Anchor(t.x,t.y))}h[h.length-1].command=a?Two.Commands.close:Two.Commands.line}N=t},this);this._automatic=false;this._curved=false;this.vertices=h;return this},_update:function(){if(this._flagVertices){i=this.vertices.length;u=i-1;s=n(this._beginning*u);o=n(this._ending*u);this._vertices.length=0;for(l=s;l<o+1;l++){f=this.vertices[l];this._vertices.push(f)}if(this._automatic){this.plot()}}Two.Shape.prototype._update.call(this);return this},flagReset:function(){this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=false;Two.Shape.prototype.flagReset.call(this);return this}});R.MakeObservable(R.prototype)})();(function(){var e=Math.min,t=Math.max;var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;var x=Two.Group=function(e){Two.Shape.call(this,true);this._renderer.type="group";this.additions=[];this.subtractions=[];this.children={}};_.extend(x,{MakeObservable:function(e){Two.Shape.MakeObservable(e);x.MakeGetterSetter(e,Two.Polygon.Properties)},MakeGetterSetter:function(e,t){if(!_.isArray(t)){t=[t]}_.each(t,function(t){n="_"+t;Object.defineProperty(e,t,{get:function(){return this[n]},set:function(e){this[n]=e;_.each(this.children,function(n){n[t]=e})}})})}});_.extend(x.prototype,Two.Shape.prototype,{_flagAdditions:false,_flagSubtractions:false,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:true,_cap:"round",_join:"round",_miter:4,_closed:true,_curved:false,_automatic:true,_beginning:0,_ending:1,clone:function(e){e=e||this.parent;s=new x;e.add(s);i=_.map(this.children,function(e){return e.clone(s)});s.translation.copy(this.translation);s.rotation=this.rotation;s.scale=this.scale;return s},toObject:function(){var e={children:{},translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};_.each(this.children,function(t,n){e.children[n]=t.toObject()},this);return e},corner:function(){o=this.getBoundingClientRect(true);u={x:o.left,y:o.top};_.each(this.children,function(e){e.translation.subSelf(u)});return this},center:function(){o=this.getBoundingClientRect(true);o.centroid={x:o.left+o.width/2,y:o.top+o.height/2};_.each(this.children,function(e){e.translation.subSelf(o.centroid)});return this},add:function(e){a=arguments.length,f=e,i=this.children,l=this.parent,c=this.additions;if(!_.isArray(e)){f=_.toArray(arguments)}_.each(f,function(e){if(!e){return}h=e.id,r=e.parent;if(_.isUndefined(i[h])){if(r){delete r.children[h];S=_.indexOf(r.additions,h);if(S>=0){r.additions.splice(S,1)}}i[h]=e;e.parent=this;c.push(h);this._flagAdditions=true}},this);return this},remove:function(e){a=arguments.length,f=e,i=this.children,l=this.parent,c=this.subtractions;if(a<=0&&l){l.remove(this);return this}if(!_.isArray(e)){f=_.toArray(arguments)}_.each(f,function(e){h=e.id,grandchildren=e.children;r=e.parent;if(!(h in i)){return}delete i[h];delete e.parent;S=_.indexOf(r.additions,h);if(S>=0){r.additions.splice(S,1)}c.push(h);this._flagSubtractions=true},this);return this},getBoundingClientRect:function(n){this._update();var r=Infinity,i=-Infinity;var s=Infinity,u=-Infinity;_.each(this.children,function(n){o=n.getBoundingClientRect();if(!_.isNumber(o.top)||!_.isNumber(o.left)||!_.isNumber(o.right)||!_.isNumber(o.bottom)){return}s=e(o.top,s);r=e(o.left,r);i=t(o.right,i);u=t(o.bottom,u)},this);return{top:s,left:r,right:i,bottom:u,width:i-r,height:u-s}},noFill:function(){_.each(this.children,function(e){e.noFill()});return this},noStroke:function(){_.each(this.children,function(e){e.noStroke()});return this},subdivide:function(){var e=arguments;_.each(this.children,function(t){t.subdivide.apply(t,e)});return this},flagReset:function(){if(this._flagAdditions){this.additions.length=0;this._flagAdditions=false}if(this._flagSubtractions){this.subtractions.length=0;this._flagSubtractions=false}Two.Shape.prototype.flagReset.call(this);return this}});x.MakeObservable(x.prototype)})()
